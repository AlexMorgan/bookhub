<h1>Edit Book</h1>

<% if @book.errors.any? %>
  <p> There were errors in your submission </p>
  <ul>
    <% @book.errors.full_messages.each do |m| %>
      <li><%= m %></li>
    <% end %>
  </ul>
<% end %>

<div id="edit-book-form">
  <%= form_for [@user, @book] do |f| %>
    <div><%= f.label :title, "Book Title" %></div>
    <%= f.text_field :title, placeholder: "ex: Book (9th Edition)", disabled: true %><br><br>

    <div><%= f.label "Author" %></div>
    <%= f.text_field :author, placeholder: "Alex Morgan" %><br><br>

    <div><%= f.label :isbn, "ISBN" %></div>
    <%= f.text_field :isbn, placeholder: "0123456789" %><br><br>

    <div><%= f.label :course_title, "Course Title" %></div>
    <%= f.text_field :course_title, placeholder: "GCOM 101" %><br><br>

    <div><%= f.label :quality %></div>
    <%= f.select :quality, Book.qualities, prompt: "Select book quality" %><br><br>

    <div><%= f.label :price %></div>
    $ <%= f.text_field :price, placeholder: "20", class: "amount-input" %>.00<br><br>

    <div><%= f.submit "Confirm", class: "btn btn-success"%></div><br><br>
  <% end %>
</div>

<div class="progress">
  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function(){

    var updateProgressBar = function() {
      var fields = 6,
      filled = fields;

      $('#edit-book-form :input').each(function() {
        if ($(this).val() == '') {
          filled --;
        };
      });

      var percentComplete = (filled / fields)*100;
      $('.progress-bar').attr('style', "width:" + percentComplete + '%');
    };

    updateProgressBar();

    $(":input").change(updateProgressBar);
  });
</script>
